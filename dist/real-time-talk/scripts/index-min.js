var DataOperatModel={groupId:null,chatMessageArry:null,account:0,msgSeq:"",getGroupId:function(a){var e="get-group-id",t='jsonString={"id":"262"}';H5.getDataGetApi(e,t,function(e){var t=e;DataOperatModel.groupId=t.groupId?t.groupId:"",DataOperatModel.groupId&&(2==a?DataOperatModel.getChatMessage(DataOperatModel.groupId,40):DataOperatModel.getChatMessage(DataOperatModel.groupId,100))})},getChatMessage:function(a,e){var t="chat-message",r='jsonString={"groupId":"'+a+'","msgSeq":"'+DataOperatModel.msgSeq+'","msgCount":"'+e+'"}';H5.getDataGetApi(t,r,function(a){var e=a;if(e){var t=0;$.each(e,function(a,e){var r=!1;$.each(DataOperatModel.chatMessageArry,function(a,t){r=$.trim(e.msgSeq)==t?!0:!1}),r||t++}),console.log(t);var r=1;$.each(e,function(a,e){DataOperatModel.checkIsRepeatChat(e.msgSeq)&&(DataOperatModel.msgSeq=e.msgSeq,function(a){t>10?setTimeout(function(){DataOperatModel.renderData(a)},50*r):setTimeout(function(){DataOperatModel.renderData(a)},700*r)}(e),r++)})}})},checkIsRepeatChat:function(a){if(DataOperatModel.chatMessageArry){var e=!0;return $.each(DataOperatModel.chatMessageArry,function(t,r){return $.trim(a)==r?(e=!1,!1):void 0}),e?(DataOperatModel.chatMessageArry.push($.trim(a)),!0):!1}return DataOperatModel.chatMessageArry=new Array,DataOperatModel.chatMessageArry.push($.trim(a)),!0},renderData:function(a){var e=new StringBuilder;e.append("<li><div class='list-content'><div class='img-div'>"),e.append("<img src='"+(""==a.headPic?"img/default_img_1.png":a.headPic)+"' /></div><div class='content-info-div'><p class='base'>"),e.append("<span class='phone'>"+a.nickName+"</span>"),e.append("<span class='date'>"+H5.formatDate(a.sendTime)+"</span></p>"),e.append("<p class='comment'>"+a.msg+"</p>"),e.append("</div></div></li>"),$(".chat-message li:first").before(e.toString())}};$(function(){DataOperatModel.getGroupId(1),setInterval(function(){DataOperatModel.getGroupId(2)},2e3)});